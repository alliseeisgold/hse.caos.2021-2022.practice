# Семинар 2

## Дополнительные материалы

* [Методичка 2020-21 года #1](https://github.com/blackav/hse-caos-2020/tree/master/07-asm1)
* [Методичка 2020-21 года #2](https://github.com/blackav/hse-caos-2020/tree/master/08-asm2)
* [Методичка 2020-21 года #3 (фрагмент)](https://github.com/blackav/hse-caos-2020/tree/master/10-asm4#%D0%BA%D0%BE%D1%81%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B5%D1%80%D0%B5%D1%85%D0%BE%D0%B4%D1%8B-%D0%B8-%D0%B2%D1%8B%D0%B7%D0%BE%D0%B2%D1%8B-%D0%BF%D0%BE%D0%B4%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC)

## Компиляция программ

### Сборка ассемблерных файлов и c-файлов
```
gcc -m32 -Wall -Werror file.S main.c simpleio_i686.S -ofile
```

### Сборка ассемблерных файлов и cpp-файлов
```
g++ -m32 -Wall -Werror file.S main.cpp simpleio_i686.S -ofile
```

*Note* Обратите внимание, что при объявлении функций в С++ их следует оформлять "специальным" образом:
```
extern "C" void myfunc(void);
```

## Задачи на семинар

### A.S

Вывести длину строки, заданной в глобальной переменной str.

### B.S + B.main.(c|cpp)

Вывести длину строки, указатель на которую сохранен в глобальной переменной ```hello```,
объявленной в другой единице трансляции.
Имя функции: ```print_hello_length```.

### C.S

Стековый калькулятор. Работа со стеком.
На стандартный вход поступают команды:

* ```0 x``` (положить в стек число ```x```),
* ```1``` (сложить два верхних числа в стеке и положить на стек результат),
* ```2``` (распечатать верхнее число в стеке),
* ```3``` (удалить верхний элемент стека).

### (D.S | D2.S) + D.main.cpp

Программа должна обойти все элементы массива и инициализировать поля ```sum``` суммой остальных полей структуры:

```
struct point
{
    int x, y, sum;
};
```

Динамический массив структур формируется в предоставленном файле ```D.main.cpp```.
Размер – в глобальной переменной ```sz```, а указатель на начало массива – в ```arr```.
Глобальные переменные объявить в S-файле.
Имя функции: ```make_sum```.

*Note* В этой задаче файл ```simpleio_i686.S``` не требуется.
