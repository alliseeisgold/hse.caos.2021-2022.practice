# Семинар 11

## Дополнительные материалы

* [Создание и работа с SO-файлами (см. слайды 21..23 в лекциях 2016-17 года)](https://github.com/hseos/hseos-course/blob/master/2016/00-lectures/20-memmng/20-memmng.pdf)
* [Пример работы с SO-файлами](https://man7.org/linux/man-pages/man3/dlopen.3.html#EXAMPLES)
* [Работа с метаданными файлов. Каталоги (методичка 2020-21 года)](https://github.com/blackav/hse-caos-2020/tree/master/12-files2)

## Задачи на семинар

**NOTE** Не забываем, что вставки мы пишем на x86-ассемблере, поэтому и программы на Си надо компилировать с флагом `-m32`.

### A.c и libA.c

* `libA.c` - Создаем библиотеку с двумя функциями:

`gcc -fPIC -shared libA.c -o libA.so`

* `A.c` - Подключаем в runtime скомпилированную библиотеку и вызываем функцию из нее. Компилируем командой:

`gcc A.c -ldl`

### B.c

В аргументах командной строки передается путь к файлу.
Определить, является ли данный файл:

* регулярным,
* каталогом,
* символической связью (ссылающейся на регулярный файл / на каталог / на прочее)
* прочим?

Полученный ответ распечатать.

### C.c

В аргументах командной строки передается путь к каталогу.
Распечать список файлов (c путями относительно заданного параметра), вложенных в данный каталог.
