# Семинар 15

## Дополнительные материалы

* [Материалы 2020-21 года по неименованным каналам](https://github.com/blackav/hse-caos-2020/tree/master/17-pipe)

## Задачи на семинар

### A.c

Программа принимает на вход 2 аргумента командной строки:

`./a.out CMD1 CMD2`

Программа должна выполнить следующую команду shell:

`CMD1 | CMD2`

### B.c

Программа принимает на вход 6 аргументов командной строки:

`./a.out CMD1 CMD2 CMD3 CMD4 FILE1 FILE2`

Программа должна выполнить следующую команду shell:

`CMD1 < FILE1 | (CMD2; CMD3) | CMD4 >> FILE2`

### C.c

Процесс-отец должен породить 2 сыновьих процесса.
Эти процессы должны по очереди записывать в файл `out.txt`
свой `PID` и значение текущего шага в очереди.

Решение этой задачи может базироваться на подходе, предложенном в [материалах 2020-21 года](https://github.com/blackav/hse-caos-2020/tree/master/17-pipe#использование-каналов-для-синхронизации).

### D

Как в шелле реализовать такой "цикл" потоков ввода-вывода?

`A | B | C -> A`

#### Решение

Для решения этой задачи можно воспользоваться так называемыми [fifo-файлами](https://man7.org/linux/man-pages/man7/fifo.7.html).
В shell для этого можно использовать команду [`mkfifo`](https://pubs.opengroup.org/onlinepubs/007904875/utilities/mkfifo.html) для создания fifo-файла, а затем сделать перенаправление потоков:

```text
    mkfifo f
    A < f | B | C > f
```

*Замечание* При программировании на Си есть соответствующий системный вызов [`mkfifo`](https://pubs.opengroup.org/onlinepubs/7908799/xsh/mkfifo.html).
